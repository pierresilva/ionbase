{"version":3,"sources":["webpack:///src/app/download/download.page.html","webpack:///src/app/download/download-routing.module.ts","webpack:///src/app/download/download.module.ts","webpack:///src/app/download/download.page.scss","webpack:///src/app/download/download.page.ts"],"names":["routes","path","component","DownloadPageRoutingModule","imports","forChild","exports","DownloadPageModule","declarations","Filesystem","DownloadPage","http","toastController","fileTransfer","device","url","fileName","download","get","responseType","subscribe","blob","reader","FileReader","readAsDataURL","onloadend","base64data","result","appendFile","data","then","res","console","log","presentToastWithOptions","create","header","message","position","buttons","side","icon","text","handler","role","toast","present","selector","template"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACKf,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE;AAFb,OADqB,CAAvB;;UAWaC,yBAAyB;AAAA;AAAA,O;;AAAzBA,+BAAyB,6DAJrC,+DAAS;AACRC,eAAO,EAAE,CAAC,6DAAaC,QAAb,CAAsBL,MAAtB,CAAD,CADD;AAERM,eAAO,EAAE,CAAC,4DAAD;AAFD,OAAT,CAIqC,GAAzBH,yBAAyB,CAAzB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCKAI,kBAAkB;AAAA;AAAA,O;;AAAlBA,wBAAkB,6DAV9B,+DAAS;AACNH,eAAO,EAAE,CACL,4DADK,EAEL,0DAFK,EAGL,0DAHK,EAIL,kEAJK,EAKL,kFALK,CADH;AAQNI,oBAAY,EAAE,CAAC,2DAAD;AARR,OAAT,CAU8B,GAAlBD,kBAAkB,CAAlB;;;;;;;;;;;;;;;;ACrBb;AAAe;;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCORE,U,GAAc,uD,CAAdA,U;;UAOMC,YAAY;AAIrB,8BACWC,IADX,EAEWC,eAFX,EAGWC,YAHX,EAG4C;AAAA;;AAFjC,eAAAF,IAAA,GAAAA,IAAA;AACA,eAAAC,eAAA,GAAAA,eAAA;AACA,eAAAC,YAAA,GAAAA,YAAA;AALJ,eAAAC,MAAA,GAAS,IAAT;AAON;;AAToB;AAAA;AAAA,qCAWV,CAEV;AAboB;AAAA;AAAA,+CAeAC,GAfA,EAeUC,QAfV,EAeyB;AAC1C,iBAAKH,YAAL,CAAkBI,QAAlB,CAA2BF,GAA3B,EAAgCC,QAAhC;AACH;AAjBoB;AAAA;AAAA,mCAmBZD,GAnBY,EAmBD;AAChB,mBAAO,KAAKJ,IAAL,CAAUO,GAAV,CAAcH,GAAd,EAAmB;AACtBI,0BAAY,EAAE;AADQ,aAAnB,CAAP;AAGH;AAvBoB;AAAA;AAAA,uCAyBRJ,GAzBQ,EAyBHC,QAzBG,EAyBO;AAAA;;AACxB,iBAAKC,QAAL,CAAcF,GAAd,EACKK,SADL,CACe,UAAAC,IAAI,EAAI;AACf,kBAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,oBAAM,CAACE,aAAP,CAAqBH,IAArB;;AACAC,oBAAM,CAACG,SAAP,GAAmB,YAAM;AACrB,oBAAIC,UAAJ;AACAA,0BAAU,GAAGJ,MAAM,CAACK,MAApB;;AACA,wEAAQlB,UAAR,CAAmBmB,UAAnB,CAA8B;AAC1BC,sBAAI,EAAEH,UADoB;AAE1BzB,sBAAI,EAAE;AAFoB,iBAA9B,EAIK6B,IAJL,CAIU,UAAAC,GAAG,EAAI;AACTC,yBAAO,CAACC,GAAR,CAAY,eAAZ,EAA6BF,GAA7B;;AACA,uBAAI,CAACG,uBAAL;AACH,iBAPL;AAQH,eAXD,CAHe,CAgBf;AACA;AACA;AACA;AACA;AACA;AACA;;AACH,aAxBL;AAyBH;AAnDoB;AAAA;AAAA,oDAqDW;;;;;;;;AACd,6BAAM,KAAKtB,eAAL,CAAqBuB,MAArB,CAA4B;AAC5CC,8BAAM,EAAE,cADoC;AAE5CC,+BAAO,EAAE,gBAFmC;AAG5CC,gCAAQ,EAAE,KAHkC;AAI5CC,+BAAO,EAAE,CACL;AACIC,8BAAI,EAAE,OADV;AAEIC,8BAAI,EAAE,MAFV;AAGIC,8BAAI,EAAE,UAHV;AAIIC,iCAAO,EAAE,mBAAM;AACXX,mCAAO,CAACC,GAAR,CAAY,kBAAZ;AACH;AANL,yBADK,EAQF;AACCS,8BAAI,EAAE,MADP;AAECE,8BAAI,EAAE,QAFP;AAGCD,iCAAO,EAAE,mBAAM;AACXX,mCAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;AALF,yBARE;AAJmC,uBAA5B,CAAN;;;AAARY,2B;AAsBNA,2BAAK,CAACC,OAAN;;;;;;;;;AACH;AA7EoB;;AAAA;AAAA,S;;;;gBAbjB;;gBAGA;;gBACA;;;;AASKpC,kBAAY,6DALxB,gEAAU;AACPqC,gBAAQ,EAAE,cADH;AAEPC,gBAAQ,EAAR;AAAA;AAAA,kGAFO;;;;AAAA,OAAV,CAKwB,GAAZtC,YAAY,CAAZ","file":"download-download-module-es5.js","sourcesContent":["export default \"<ion-header>\\r\\n  <ion-toolbar>\\r\\n    <ion-title>download</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content>\\r\\n\\r\\n  <ion-button (click)=\\\"downloadFileTransfer('http://www.africau.edu/images/default/sample.pdf', 'downloaded.pdf')\\\"\\r\\n              fill=\\\"clear\\\">Download File\\r\\n    <ion-icon slot=\\\"end\\\" name=\\\"qr-code-outline\\\"></ion-icon>\\r\\n  </ion-button>\\r\\n\\r\\n</ion-content>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DownloadPage } from './download.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DownloadPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class DownloadPageRoutingModule {}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\nimport {FormsModule} from '@angular/forms';\r\n\r\nimport {IonicModule} from '@ionic/angular';\r\n\r\nimport {DownloadPageRoutingModule} from './download-routing.module';\r\n\r\nimport {DownloadPage} from './download.page';\r\nimport {SharedModule} from '../@shared/shared.module';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        FormsModule,\r\n        IonicModule,\r\n        SharedModule,\r\n        DownloadPageRoutingModule\r\n    ],\r\n    declarations: [DownloadPage]\r\n})\r\nexport class DownloadPageModule {\r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2Rvd25sb2FkL2Rvd25sb2FkLnBhZ2Uuc2NzcyJ9 */\";","import {Component, OnInit} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {Plugins} from '@capacitor/core';\r\nimport {ToastController} from '@ionic/angular';\r\nimport {FileTransferService} from \"../@shared/services/file-transfer.service\";\r\n\r\nconst {Filesystem} = Plugins;\r\n\r\n@Component({\r\n    selector: 'app-download',\r\n    templateUrl: './download.page.html',\r\n    styleUrls: ['./download.page.scss'],\r\n})\r\nexport class DownloadPage implements OnInit {\r\n\r\n    public device = null;\r\n\r\n    constructor(\r\n        public http: HttpClient,\r\n        public toastController: ToastController,\r\n        public fileTransfer: FileTransferService\r\n    ) {\r\n    }\r\n\r\n    ngOnInit() {\r\n\r\n    }\r\n\r\n    downloadFileTransfer(url: any, fileName: any) {\r\n        this.fileTransfer.download(url, fileName);\r\n    }\r\n\r\n    download(url: string): Observable<Blob> {\r\n        return this.http.get(url, {\r\n            responseType: 'blob'\r\n        });\r\n    }\r\n\r\n    downloadFile(url, fileName) {\r\n        this.download(url)\r\n            .subscribe(blob => {\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(blob);\r\n                reader.onloadend = () => {\r\n                    let base64data: any;\r\n                    base64data = reader.result;\r\n                    Plugins.Filesystem.appendFile({\r\n                        data: base64data,\r\n                        path: 'images/image.png'\r\n                    })\r\n                        .then(res => {\r\n                            console.log('se escribiooo', res);\r\n                            this.presentToastWithOptions();\r\n                        });\r\n                };\r\n\r\n                // const a = document.createElement('a');\r\n                // const objectUrl = URL.createObjectURL(blob);\r\n                // console.log(blob, objectUrl);\r\n                // a.href = objectUrl;\r\n                // a.download = fileName;\r\n                // a.click();\r\n                // URL.revokeObjectURL(objectUrl);\r\n            });\r\n    }\r\n\r\n    async presentToastWithOptions() {\r\n        const toast = await this.toastController.create({\r\n            header: 'Toast header',\r\n            message: 'Click to Close',\r\n            position: 'top',\r\n            buttons: [\r\n                {\r\n                    side: 'start',\r\n                    icon: 'star',\r\n                    text: 'Favorite',\r\n                    handler: () => {\r\n                        console.log('Favorite clicked');\r\n                    }\r\n                }, {\r\n                    text: 'Done',\r\n                    role: 'cancel',\r\n                    handler: () => {\r\n                        console.log('Cancel clicked');\r\n                    }\r\n\r\n                }\r\n            ]\r\n        });\r\n        toast.present();\r\n    }\r\n\r\n}\r\n"]}